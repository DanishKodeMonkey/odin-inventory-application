<!DOCTYPE html>
<html lang="en">
    <head>
        <%- include('../partials/head.ejs') %>
    </head>
    <body class="container">
        <header><%- include('../partials/header.ejs') %></header>
        <main>
            <div class="content">
                <h1><%= title %>: <%= category.title %></h1>
                <p><%= category.description %></p>

                <% if (category_items.length) { %>
                 <p><strong>Delete the following items before attempting to delete this category:</strong></p>
                 <div>
                    <h4>Items</h4>
                    <dl>
                        <% category_items.forEach(item => { %>
                         <dt><a href="<%= item.url %>"><%= item.name %></a></dt>
                         <dd>Number in stock: <%= item.numberInStock %></dd>
                        <% }) %>
                    </dl>
                 </div>
                <% } else { %> 
                    <p>Do you really want to delete this category? This cannot be undone.</p>
                    
                    <form method="post">
                        <div class="form-group">
                            <input type="hidden" id="categoryid" class="form-control" name="categoryid" value="<%= category._id %>">
                            <button class="btn btn-primary" type="submit">Delete</button>
                        </div>
                    </form>
                <% } %>
                 
            </div>
        </main>
        <footer><%- include('../partials/footer.ejs') %></footer>
    </body>
</html>
